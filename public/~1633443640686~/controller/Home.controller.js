sap.ui.define(["./util/BaseController","sap/ui/core/Fragment"],function(t,e){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.Home",{onPressEnableLive:function(t){this._executeAction("enable-live")},onPressDisableLive:function(t){this._executeAction("disable-live")},_executeAction:function(t){this._sEndpoint=t;if(!this._oPromptDialog){this.setBusy(true);const t=this.getView();e.load({name:"com.perezjquim.iglivemode.pwa.view.fragment.ActionPrompt",controller:this}).then(function(e){this.setBusy(false);t.addDependent(e);e.open();this._oPromptDialog=e}.bind(this))}else{this._oPromptDialog.open()}},onConfirmAction:function(){this.setBusy(true);const t=this.getModel("config");const e=t.getData();const o=this.getModel("prompt");const i=o.getData();const s={...e,...i};const n=JSON.stringify(s);if(e&&i&&n){fetch(`${this.API_BASE_URL}/${this._sEndpoint}`,{method:"POST",body:n}).then(t=>{if(t.ok){const t=this.getText("action_success");this.toast(t);this._oPromptDialog.close()}else{const t=this.getText("action_error");this.toast(t)}}).catch(()=>{const t=this.getText("action_error");this.toast(t)}).finally(()=>{this.setBusy(false)})}else{this.setBusy(false);const t=this.getText("incomplete_data");this.toast(t)}},onCancelAction:function(t){const e=t.getSource();const o=e.getParent();o.close()},onBeforeOpenPromptDialog:function(t){this.clearModel("prompt")},onAfterClosePromptDialog:function(t){this.clearModel("prompt")}})});