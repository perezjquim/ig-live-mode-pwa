sap.ui.define(["./util/BaseController","sap/ui/util/Storage"],function(t,n){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.Config",{onInit:function(){const t=this.getModel("config");t.attachPropertyChange(this.onConfigChange.bind(this))},onConfigChange:function(){this.setBusy(true);const t=this.getModel("config");const n=t.getData();const e=JSON.stringify(n);const o=this.getStorage();o.setItem("config",e);this.setBusy(false)},onAddEntry:function(t){const n=t.getSource();const e=n.getParent();const o=e.getParent();const s=o.getBinding("items");const c=s.getModel();const i=s.getPath();const r=c.getProperty(i);const g=r.concat([{}]);c.setProperty(i,g)},onRemoveEntry:function(t){const n=t.getSource();const e=n.getParent();const o=e.getParent();const s=o.getParent();const c=s.getItems();const i=c.findIndex(function(t){return t==o});const r=s.getBinding("items");const g=r.getModel();const a=r.getPath();const f=g.getProperty(a);const u=f;u.splice(i,1);g.setProperty(a,u);this.onConfigChange()},fetchAvatar:async function(t){if(t){const n=await this._getUserInfo(t);if(n){const t="profile_pic_content";const e=n[t];return e}}},fetchFullName:async function(t){if(t){const n=await this._getUserInfo(t);if(n){const t="full_name";const e=n[t];return e}}},_getUserInfo:async function(t){const n=this.getModel("ig_user_info");const e=`/${t}`;var o=n.getProperty(e);if(o){return o}else{o=await this._fetchUserInfo(t);n.setProperty(e,o);return o}},_fetchUserInfo:async function(t){const n=await fetch(`${this.API_BASE_URL}/get-user-info/${t}`,{method:"GET"});if(n.ok){const t=await n.json();return t}else{return{}}}})});