sap.ui.define(["./util/BaseController","sap/m/MessageBox","sap/ui/core/Fragment","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,s,n,o){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.Config",{onSaveConfig:async function(t){this.setBusy(true);const e=this.getModel("config_draft");const s=e.getData();const n=JSON.stringify(s);try{const t=await fetch(`${this.API_BASE_URL}/update-config`,{method:"POST",headers:this._getHeaders(),body:n});if(t.ok){const e=await t.json();const s=this.getModel("config");s.setData(this._copy(e));this._listenConfigChanges();const n=this.getModel("misc");n.setProperty("/is_config_changed",false);const o=this.getText("action_success");this.toast(o)}else{const t=this.getText("action_error");this.toast(t)}}catch(t){console.warn(t);this.toast(t)}this.setBusy(false)},onDiscardConfig:function(t){this.setBusy(true);const e=this.getModel("config");const s=e.getData();const n=this.getModel("config_draft");n.setData(this._copy(s));this._listenConfigChanges();const o=this.getModel("misc");o.setProperty("/is_config_changed",false);this.setBusy(false)},onFollowerSearch:function(t){const e=[];const s=t.getParameter("newValue");if(s){const t=new n({filters:[new n("full_name",o.Contains,s),new n("username",o.Contains,s)],and:true});e.push(t)}const i=t.getSource();const a=i.getParent();const c=a.getParent();const r=c.getBinding("items");r.filter(e,"Application")}})});