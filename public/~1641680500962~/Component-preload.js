//@ui5-bundle com/perezjquim/iglivemode/pwa/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"com/perezjquim/iglivemode/pwa/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device"],function(i,e){"use strict";return i.extend("com.perezjquim.iglivemode.pwa.Component",{metadata:{manifest:"json"},init:function(){i.prototype.init.apply(this,arguments);this.getRouter().initialize()}})});
},
	"com/perezjquim/iglivemode/pwa/controller/App.controller.js":function(){sap.ui.define(["./util/BaseController","sap/ui/core/routing/History","sap/ui/core/Fragment","sap/ui/util/Storage","sap/ui/Device","./util/SWHelper"],function(t,e,o,s,n,i){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.App",{onInit:function(t){const e=new i(this);e.init();this._reloadConfig();this._checkLogin()},onHomeButtonPress:function(t){const e=t.getSource();const o=e.getParent();const s=o.getSideContent();const n=s.getItem();const i=n.getItems();const c=i.find(function(t){const e=t.getKey();return e=="Home"});n.fireItemSelect({item:c})},onMenuButtonPress:function(t){const e=t.getSource();const o=e.getParent();const s=o.getSideExpanded();o.setSideExpanded(!s)},onNavigationItemSelect:function(t){const e=t.getParameter("item");const o=e.getKey();this.navTo(o);const s=n.system.phone;if(s){const e=t.getSource();const o=e.getParent();o.setSideExpanded(false)}},onNavButtonPress:function(t){this.navBack()},_reloadConfig:function(){const t=this.getStorage();const e=t.getItem("config");if(e){const t=JSON.parse(e);const o=this.getModel("config");o.setData(t)}},_checkLogin:function(){const t=this.getModel("config");const e=Boolean(localStorage.getItem("ig_settings"));if(e){(async function(){this._fetchUserInfo()}).bind(this)()}else{this._askForLogin()}},_fetchUserInfo:async function(){this.setBusy(true);const t=this._getAuthenticatedBody();const e=await fetch(`${this.API_BASE_URL}/get-user-full-info`,{method:"POST",body:t});if(e.ok){const t=await e.json();const o=this.getModel("ig_user_info");o.setData(t)}this.setBusy(false)},_askForLogin:function(){if(!this._oLoginPromptDialog){this.setBusy(true);o.load({name:"com.perezjquim.iglivemode.pwa.view.fragment.LoginPrompt",controller:this}).then(function(t){this.setBusy(false);const e=this.getView();e.addDependent(t);t.open();this._oLoginPromptDialog=t}.bind(this))}else{this._oLoginPromptDialog.open()}},onBeforeOpenLoginPrompt:function(t){this.clearModel("login_prompt")},onAfterCloseLoginPrompt:function(t){this.clearModel("login_prompt")},onConfirmLogin:async function(t){this.setBusy(true);const e=this.getModel("login_prompt");const o=e.getData();const s=o["user"];const n=o["pw"];const i="Basic "+btoa(s+":"+n);if(o&&i){fetch(`${this.API_BASE_URL}/login`,{method:"POST",headers:{Authorization:i}}).then(async t=>{if(t.ok){const e=await t.json();const o=JSON.stringify(e);localStorage.setItem("ig_settings",o);this._reloadConfig();this._fetchUserInfo();const s=this.getText("action_success");this.toast(s);this._oLoginPromptDialog.close()}else{const t=this.getText("action_error");this.toast(t)}}).catch(()=>{const t=this.getText("action_error");this.toast(t)}).finally(()=>{this.setBusy(false)})}else{this.setBusy(false);const t=this.getText("incomplete_data");this.toast(t)}},dummyEscapeHandler:function(t){t.reject()},onAvatarPress:function(t){const e=t.getSource();if(!this._oUserDetailsPopover){this.setBusy(true);o.load({name:"com.perezjquim.iglivemode.pwa.view.fragment.UserDetailsPopover",controller:this}).then(function(t){this.setBusy(false);const o=this.getView();o.addDependent(t);t.openBy(e);this._oUserDetailsPopover=t}.bind(this))}else{if(this._oUserDetailsPopover.isOpen()){this._oUserDetailsPopover.close()}else{this._oUserDetailsPopover.openBy(e)}}},onLogoff:function(t){this.setBusy(true);localStorage.setItem("ig_settings","");location.reload()}})});
},
	"com/perezjquim/iglivemode/pwa/controller/Config.controller.js":function(){sap.ui.define(["./util/BaseController","sap/m/MessageBox","sap/ui/core/Fragment"],function(e,t,n){"use strict";return e.extend("com.perezjquim.iglivemode.pwa.controller.Config",{getGeneralBlacklist:function(e){const t=this.getModel("config");const n=t.getProperty("/general_blacklist");return e.filter(function(e){return n.includes(e["username"])})},getLiveWhitelist:function(e){const t=this.getModel("config");const n=t.getProperty("/live_whitelist");return e.filter(function(e){return n.includes(e["username"])})},onToggleUserInGeneralBlacklist:function(e){this._toggleUser(e,"/general_blacklist")},onToggleUserInLiveWhitelist:function(e){this._toggleUser(e,"/live_whitelist")},_toggleUser:function(e,t){const n=e.getSource();const i=n.getBindingContext("ig_user_info");const s=i.getProperty("username");const o=this.getModel("config");var r=o.getProperty(t);if(r.includes(s)){r.splice(r.indexOf(s),1)}else{r.push(s)}o.setProperty(t,r);this._saveConfig()},_saveConfig:function(){this.setBusy(true);const e=this.getModel("config");const t=e.getData();const n=JSON.stringify(t);const i=this.getStorage();i.setItem("config",n);this.setBusy(false)}})});
},
	"com/perezjquim/iglivemode/pwa/controller/Home.controller.js":function(){sap.ui.define(["./util/BaseController"],function(e){"use strict";return e.extend("com.perezjquim.iglivemode.pwa.controller.Home",{})});
},
	"com/perezjquim/iglivemode/pwa/controller/ToggleLiveMode.controller.js":function(){sap.ui.define(["./util/BaseController","sap/ui/core/Fragment"],function(t,e){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.ToggleLiveMode",{onPressEnableLive:function(t){this._executeAction("enable-live")},onPressDisableLive:function(t){this._executeAction("disable-live")},_executeAction:function(t){this.setBusy(true);const e=this._getAuthenticatedBody();if(oConfigData&&oIGSettings&&e){fetch(`${this.API_BASE_URL}/${t}`,{method:"POST",body:e}).then(t=>{if(t.ok){const t=this.getText("action_success");this.toast(t)}else{const t=this.getText("action_error");this.toast(t)}}).catch(()=>{const t=this.getText("action_error");this.toast(t)}).finally(()=>{this.setBusy(false)})}else{this.setBusy(false);const t=this.getText("incomplete_data");this.toast(t)}}})});
},
	"com/perezjquim/iglivemode/pwa/controller/util/BaseController.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/BusyIndicator","sap/m/MessageToast"],function(t,e,o,n){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.util.BaseController",{_oFetchPromises:[],API_BASE_URL:"http://localhost:8000",toast:function(t){n.show(t)},setBusy:function(t){if(t){o.show(0)}else{o.hide()}},getModel:function(t){const e=this.getOwnerComponent();const o=e.getModel(t);return o},attachPatternMatched(t,e){const o=this.getOwnerComponent();const n=o.getRouter();const s=n.getRoute(t);s.attachPatternMatched(e)},getConfig:function(t){const e=this.getModel("config");const o=e.getProperty(`/${t}`);return o},navTo:function(t,e,o){const n=this.getOwnerComponent();const s=n.getRouter();s.navTo(t,e,o)},getText:function(t){const e=this.getModel("i18n");const o=e.getResourceBundle();const n=o.getText(t);return n},navBack:function(){const t=e.getInstance();const o=t.getPreviousHash();if(o){window.history.go(-1)}else{this.navTo("Home",{},true)}},getStorage:function(){return window.localStorage},clearModel:function(t){const e=this.getModel(t);const o=e.getData();for(var n in o){o[n]=""}e.setData(o)},_getAuthenticatedBody:function(){const t=this.getModel("config");const e=t.getData();const o=localStorage.getItem("ig_settings");const n=JSON.parse(o);const s={config:e,ig_settings:n};const c=JSON.stringify(s);return c}})});
},
	"com/perezjquim/iglivemode/pwa/controller/util/SWHelper.js":function(){sap.ui.define(["sap/ui/base/Object"],function(e){return e.extend("com.perezjquim.iglivemode.pwa.controller.util.SWHelper",{_oController:null,constructor:function(e){this._oController=e},init:function(){this._cleanup();this._registerSW();window.addEventListener("beforeunload",this._cleanup.bind(this))},_registerSW:function(){if(navigator.serviceWorker){navigator.serviceWorker.register("/sw.js")}},_cleanup:function(){if(navigator.serviceWorker){navigator.serviceWorker.getRegistrations().then(function(e){for(let r of e){r.unregister()}})}}})});
},
	"com/perezjquim/iglivemode/pwa/i18n/i18n.properties":'appTitle=IG Live Mode\nappDescription=IG Live Mode\n\nenable_live=Enable Live Mode\ndisable_live=Disable Live Mode\n\nHome=Home\n\nToggleLiveMode=Enable/Disable Live Mode\n\nConfig=Config\nuser=IG User\npw=IG Password\ngeneral_blacklist=General blacklist\ngeneral_blacklist_tip=IG followers blocked in general\nlive_whitelist=Live whitelist\nlive_whitelist_tip=IG followers allowed to watch IG lives\n\nincomplete_data=Incomplete data!\n\nconfirm=Confirm\ncancel=Cancel\n\naction_success=Done!\naction_error=Error!\n\nupdating=Update available! Reloading...\n\nconfirm_remove_user=Are you sure you want to remove this user?\nuser_removed=User removed!\n\nlogin=Login\nlogoff=Logoff\nuser_details=IG User Details\n\n',
	"com/perezjquim/iglivemode/pwa/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"com.perezjquim.iglivemode.pwa","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"servicecatalog.connectivityComponentForManifest","version":"0.0.0"},"dataSources":{}},"sap.ui":{"technology":"UI5","icons":{"icon":"images/icon.png","favIcon":"images/icon.png","phone":"images/icon.png","phone@2":"images/icon.png","tablet":"images/icon.png","tablet@2":"images/icon.png"},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"com.perezjquim.iglivemode.pwa.view.App","type":"XML","async":true},"dependencies":{"minUI5Version":"1.52.16","libs":{"sap.ui.layout":{},"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.perezjquim.iglivemode.pwa.i18n.i18n"}},"config":{"type":"sap.ui.model.json.JSONModel","uri":"model/config.json"},"navigation":{"type":"sap.ui.model.json.JSONModel","uri":"model/navigation.json"},"ig_user_info":{"type":"sap.ui.model.json.JSONModel"},"login_prompt":{"type":"sap.ui.model.json.JSONModel"}},"resources":{},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"controlId":"app","viewPath":"com.perezjquim.iglivemode.pwa.view","controlAggregation":"pages"},"routes":[{"name":"Home","pattern":"","target":["Home"]},{"name":"Config","pattern":"Config","target":["Config"]},{"name":"ToggleLiveMode","pattern":"ToggleLiveMode","target":["ToggleLiveMode"]}],"targets":{"Home":{"viewType":"XML","transition":"slide","controlAggregation":"pages","viewName":"Home"},"Config":{"viewType":"XML","transition":"slide","controlAggregation":"pages","viewName":"Config"},"ToggleLiveMode":{"viewType":"XML","transition":"slide","controlAggregation":"pages","viewName":"ToggleLiveMode"}}}}}',
	"com/perezjquim/iglivemode/pwa/sw.js":function(){self.addEventListener("fetch",function(e){});
},
	"com/perezjquim/iglivemode/pwa/view/App.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.App"\n    xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:tnt="sap.tnt"><tnt:ToolPage><tnt:header><f:ShellBar \n            \thomeIcon="./images/icon.png" \n            \thomeIconPressed="onHomeButtonPress" \n                showMenuButton="true"                 \n            \tmenuButtonPressed="onMenuButtonPress" \n                showNavButton="true"\n                navButtonPressed="onNavButtonPress"\n            \ttitle="{i18n>appTitle}"><f:profile><Avatar\n                            src="{ig_user_info>/profile_pic_content}"\n                            displaySize="S"\n                            showBorder="true"\n                            press="onAvatarPress"/></f:profile></f:ShellBar></tnt:header><tnt:sideContent><tnt:SideNavigation \n            \texpanded="false" \n            \titemSelect="onNavigationItemSelect" \n            \tselectedKey="{navigation>/selected}"><tnt:NavigationList \n                \titems="{navigation>/items}"><tnt:NavigationListItem \n                    \ticon="{navigation>icon}" \n                    \tkey="{navigation>key}" \n                    \ttext="{ path: \'navigation>key\', formatter: \'.getText\' }"/></tnt:NavigationList></tnt:SideNavigation></tnt:sideContent><tnt:mainContents><App \n            \tid="app"/></tnt:mainContents></tnt:ToolPage></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/Config.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.Config" \n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:core="sap.ui.core"><Page \n        title="{i18n>Config}"><f:SimpleForm \n            editable="true"><f:content><Label \n                    text="{i18n>general_blacklist}" /><Table\n                    fixedLayout="false"\n                    items="{ig_user_info>/followers}"><headerToolbar><OverflowToolbar><content><core:Icon\n                                    src="sap-icon://private"\n                                    color="Negative"/><ObjectStatus\n                                    state="Error"\n                                    text="{i18n>general_blacklist_tip}"/></content></OverflowToolbar></headerToolbar><columns><Column><Label text="{i18n>user}" /></Column><Column><Label /></Column><Column><Label /></Column></columns><items><ColumnListItem><cells><Avatar \n                                    src="{ig_user_info>profile_pic_content}"\n                                    displaySize="S"\n                                    showBorder="true" /><Text    \n                                    text="{= ${ig_user_info>full_name} || \'-\' } ({ig_user_info>username})"/><CheckBox\n                                    select="onToggleUserInGeneralBlacklist"\n                                    selected="{= ${config>/general_blacklist}.includes(${ig_user_info>username}) }" /></cells></ColumnListItem></items></Table><Label \n                    text="{i18n>live_whitelist}" /><Table\n                    fixedLayout="false"\n                    items="{ig_user_info>/followers}"><headerToolbar><OverflowToolbar><content><core:Icon\n                                    src="sap-icon://role"\n                                    color="Positive"/><ObjectStatus\n                                    state="Success"\n                                    text="{i18n>live_whitelist_tip}"/></content></OverflowToolbar></headerToolbar><columns><Column><Label text="{i18n>user}" /></Column><Column><Label /></Column><Column><Label /></Column></columns><items><ColumnListItem><cells><Avatar \n                                    src="{ig_user_info>profile_pic_content}"\n                                    displaySize="S"\n                                    showBorder="true" /><Text   \n                                    text="{= ${ig_user_info>full_name} || \'-\' } ({ig_user_info>username})"/><CheckBox\n                                    select="onToggleUserInLiveWhitelist"\n                                    selected="{= ${config>/live_whitelist}.includes(${ig_user_info>username}) }" /></cells></ColumnListItem></items></Table></f:content></f:SimpleForm></Page></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/Home.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.Home" \n    xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:mvc="sap.ui.core.mvc"><Page \n    \ttitle="{i18n>Home}"><f:GridContainer  \n            items="{ \n                path: \'navigation>/items\', \n                filters:\n                [\n                    { path: \'key\', operator: \'NE\', value1: \'Home\' }\n                ]\n            }"><f:items><GenericTile \n                    class="sapUiSmallMargin"\n                    header="{ path: \'navigation>key\', formatter: \'.getText\' }"\n                    press=".navTo(${ path: \'navigation>key\' })"><layoutData><f:GridContainerItemLayoutData minRows="2" columns="2" /></layoutData><TileContent><ImageContent src="{navigation>icon}" /></TileContent></GenericTile></f:items></f:GridContainer></Page></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/ToggleLiveMode.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.ToggleLiveMode" \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:mvc="sap.ui.core.mvc"><Page \n    \ttitle="{i18n>ToggleLiveMode}"><f:SimpleForm \n        \teditable="false"><f:content><HBox justifyContent="SpaceBetween"><Button \n                    \ticon="sap-icon://play" \n                    \tpress="onPressEnableLive" \n                    \ttext="{i18n>enable_live}" \n                    \ttype="Accept" /><Button\n                    \ticon="sap-icon://stop" \n                    \tpress="onPressDisableLive" \n                    \ttext="{i18n>disable_live}" \n                    \ttype="Reject" /></HBox></f:content></f:SimpleForm></Page></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/fragment/LoginPrompt.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"><Dialog\n\t\tbeforeOpen="onBeforeOpenLoginPrompt"\n\t\tafterClose="onAfterCloseLoginPrompt"\n\t\tescapeHandler=".dummyEscapeHandler"\n\t\ttitle="{i18n>login}"><content><VBox fitContainer="true" justifyContent="Center" alignItems="Center" alignContent="Center"><items><Input width="20vw" placeholder="{i18n>user}" value="{login_prompt>/user}"/><Input width="20vw" placeholder="{i18n>pw}" type="Password" value="{login_prompt>/pw}"/><Button\n\t\t\t\t\t\twidth="20vw"\n\t\t\t\t\t\ttext="{i18n>login}"\n\t\t\t\t\t\ttype="Emphasized"\n\t\t\t\t\t\tpress="onConfirmLogin"/></items></VBox></content></Dialog></core:FragmentDefinition>',
	"com/perezjquim/iglivemode/pwa/view/fragment/UserDetailsPopover.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Popover\n\t\ttitle="{Name}"\n\t\tplacement="Bottom" ><customHeader><OverflowToolbar><Title \n\t\t\t\t\ttext="{i18n>user_details}"/><ToolbarSpacer/><Button \n\t\t\t\t\ttype="Emphasized"\n\t\t\t\t\ttext="{i18n>logoff}"\n\t\t\t\t\tpress="onLogoff"/></OverflowToolbar></customHeader><content><VBox\n\t\t\t\talignItems="Center"\n\t\t\t\talignContent="Center"\n\t\t\t\tjustifyContent="SpaceBetween"><items><Avatar\n\t\t\t\t\t\tclass="sapUiTinyMargin"\n\t                            \t\tsrc="{ig_user_info>/profile_pic_content}"\n\t\t                            \tdisplaySize="L"\n\t\t                            \tshowBorder="true"/><Title \n\t\t\t\t\t\ttext="{ig_user_info>/full_name}" /><Text \n\t\t\t\t\t\tclass="sapUiTinyMargin"\n\t\t\t\t\t\ttext="({ig_user_info>/username})" /></items></VBox></content></Popover></core:FragmentDefinition>'
}});
