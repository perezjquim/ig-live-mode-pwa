//@ui5-bundle com/perezjquim/iglivemode/pwa/Component-preload.js
jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"com/perezjquim/iglivemode/pwa/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device"],function(i,e){"use strict";return i.extend("com.perezjquim.iglivemode.pwa.Component",{metadata:{manifest:"json"},init:function(){i.prototype.init.apply(this,arguments);this.getRouter().initialize()}})});
},
	"com/perezjquim/iglivemode/pwa/controller/App.controller.js":function(){sap.ui.define(["./util/BaseController","sap/ui/core/routing/History","sap/ui/core/Fragment","sap/ui/util/Storage","sap/ui/Device","./util/SWHelper"],function(t,e,o,n,s,i){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.App",{onInit:function(t){const e=new i(this);e.init();this._reloadConfig();this._checkLogin()},onHomeButtonPress:function(t){const e=t.getSource();const o=e.getParent();const n=o.getSideContent();const s=n.getItem();const i=s.getItems();const a=i.find(function(t){const e=t.getKey();return e=="Home"});s.fireItemSelect({item:a})},onMenuButtonPress:function(t){const e=t.getSource();const o=e.getParent();const n=o.getSideExpanded();o.setSideExpanded(!n)},onNavigationItemSelect:function(t){const e=t.getParameter("item");const o=e.getKey();this.navTo(o);const n=s.system.phone;if(n){const e=t.getSource();const o=e.getParent();o.setSideExpanded(false)}},onNavButtonPress:function(t){this.navBack()},_reloadConfig:function(){const t=this.getStorage();var e={};const o=t.getItem("config");if(o){e=JSON.parse(o)}const n=t.getItem("authenticated_user_name");e["authenticated_user_name"]=n;const s=this.getModel("config");s.setData(e)},_checkLogin:function(){const t=this.getModel("config");const e=Boolean(localStorage.getItem("authenticated_user_name"));if(!e){this._askForLogin()}},_askForLogin:function(){if(!this._oLoginPromptDialog){this.setBusy(true);o.load({name:"com.perezjquim.iglivemode.pwa.view.fragment.LoginPrompt",controller:this}).then(function(t){this.setBusy(false);const e=this.getView();e.addDependent(t);t.open();this._oLoginPromptDialog=t}.bind(this))}else{this._oLoginPromptDialog.open()}},onBeforeOpenLoginPrompt:function(t){this.clearModel("login_prompt")},onAfterCloseLoginPrompt:function(t){this.clearModel("login_prompt")},onConfirmLogin:async function(t){this.setBusy(true);const e=this.getModel("login_prompt");const o=e.getData();const n=o["user"];const s=o["pw"];const i="Basic "+btoa(n+":"+s);if(o&&i){fetch(`${this.API_BASE_URL}/login`,{method:"POST",headers:{Authorization:i}}).then(async t=>{if(t.ok){const e=await t.json();const o=JSON.stringify(e);localStorage.setItem("ig_settings",o);localStorage.setItem("authenticated_user_name",n);this._reloadConfig();const s=this.getText("action_success");this.toast(s);this._oLoginPromptDialog.close()}else{const t=this.getText("action_error");this.toast(t)}}).catch(()=>{const t=this.getText("action_error");this.toast(t)}).finally(()=>{this.setBusy(false)})}else{this.setBusy(false);const t=this.getText("incomplete_data");this.toast(t)}},dummyEscapeHandler:function(t){t.reject()},onAvatarPress:function(t){const e=t.getSource();if(!this._oUserDetailsPopover){this.setBusy(true);o.load({name:"com.perezjquim.iglivemode.pwa.view.fragment.UserDetailsPopover",controller:this}).then(function(t){this.setBusy(false);const o=this.getView();o.addDependent(t);t.openBy(e);this._oUserDetailsPopover=t}.bind(this))}else{if(this._oUserDetailsPopover.isOpen()){this._oUserDetailsPopover.close()}else{this._oUserDetailsPopover.openBy(e)}}},onLogoff:function(t){this.setBusy(true);localStorage.setItem("authenticated_user_name","");location.reload()}})});
},
	"com/perezjquim/iglivemode/pwa/controller/Config.controller.js":function(){sap.ui.define(["./util/BaseController","sap/m/MessageBox","sap/ui/core/Fragment"],function(e,t,o){"use strict";return e.extend("com.perezjquim.iglivemode.pwa.controller.Config",{onInit:function(){const e=this.getModel("config");e.attachPropertyChange(this.onConfigChange.bind(this))},onConfigChange:function(){this.setBusy(true);const e=this.getModel("config");const t=e.getData();const o=JSON.stringify(t);const n=this.getStorage();n.setItem("config",o);this.setBusy(false)},onAddEntry:function(e){const t=e.getSource();this._oNewUserSource=t;if(!this._oNewUserPopover){this.setBusy(true);const e=this.getView();o.load({name:"com.perezjquim.iglivemode.pwa.view.fragment.NewUserPopover",controller:this}).then(function(o){this.setBusy(false);e.addDependent(o);o.openBy(t);this._oNewUserPopover=o}.bind(this))}else{if(this._oNewUserPopover.isOpen()){this._oNewUserPopover.close()}else{this._oNewUserPopover.openBy(t)}}},onConfirmNewUser:function(e){const t=this.getModel("new_user_prompt");const o=t.getProperty("/user_name");this._addEntry(this._oNewUserSource,o);this._closePopover(e)},onCancelNewUser:function(e){this._closePopover(e)},_closePopover:function(e){const t=e.getSource();const o=t.getParent();const n=o.getParent();n.close()},onBeforeOpenNewUserPopover:function(e){this.clearModel("new_user_prompt")},onAfterCloseNewUserPopover:function(e){this.clearModel("new_user_prompt")},_addEntry:function(e,t){const o=e.getParent();const n=o.getParent();const s=n.getBinding("items");const i=s.getModel();const r=s.getPath();const c=i.getProperty(r);const g=c.concat([{user_name:t}]);i.setProperty(r,g)},onRemoveEntry:function(e){const o=e.getSource();const n=this.getText("confirm_remove_user");t.confirm(n,{actions:[t.Action.OK,t.Action.CANCEL],emphasizedAction:t.Action.OK,onClose:function(e){if(e==t.Action.OK){this._removeEntry(o);const e=this.getText("user_removed");this.toast(e)}}.bind(this)})},_removeEntry:function(e){const t=e.getParent();const o=t.getParent();const n=o.getParent();const s=n.getItems();const i=s.findIndex(function(e){return e==o});const r=n.getBinding("items");const c=r.getModel();const g=r.getPath();const a=c.getProperty(g);const u=a;u.splice(i,1);c.setProperty(g,u);this.onConfigChange()}})});
},
	"com/perezjquim/iglivemode/pwa/controller/Home.controller.js":function(){sap.ui.define(["./util/BaseController"],function(e){"use strict";return e.extend("com.perezjquim.iglivemode.pwa.controller.Home",{})});
},
	"com/perezjquim/iglivemode/pwa/controller/ToggleLiveMode.controller.js":function(){sap.ui.define(["./util/BaseController","sap/ui/core/Fragment"],function(t,e){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.ToggleLiveMode",{onPressEnableLive:function(t){this._executeAction("enable-live")},onPressDisableLive:function(t){this._executeAction("disable-live")},_executeAction:function(t){this.setBusy(true);const e=this.getModel("config");const s=e.getData();const i=localStorage.getItem("ig_settings");const o=JSON.parse(i);const n={config:s,ig_settings:o};const c=JSON.stringify(n);if(s&&o&&c){fetch(`${this.API_BASE_URL}/${t}`,{method:"POST",body:c}).then(t=>{if(t.ok){const t=this.getText("action_success");this.toast(t)}else{const t=this.getText("action_error");this.toast(t)}}).catch(()=>{const t=this.getText("action_error");this.toast(t)}).finally(()=>{this.setBusy(false)})}else{this.setBusy(false);const t=this.getText("incomplete_data");this.toast(t)}}})});
},
	"com/perezjquim/iglivemode/pwa/controller/util/BaseController.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/BusyIndicator","sap/m/MessageToast"],function(t,e,o,n){"use strict";return t.extend("com.perezjquim.iglivemode.pwa.controller.util.BaseController",{_oFetchPromises:[],API_BASE_URL:"https://perezjquim-ig-live-mode.herokuapp.com",toast:function(t){n.show(t)},setBusy:function(t){if(t){o.show(0)}else{o.hide()}},getModel:function(t){const e=this.getOwnerComponent();const o=e.getModel(t);return o},attachPatternMatched(t,e){const o=this.getOwnerComponent();const n=o.getRouter();const s=n.getRoute(t);s.attachPatternMatched(e)},getConfig:function(t){const e=this.getModel("config");const o=e.getProperty(`/${t}`);return o},navTo:function(t,e,o){const n=this.getOwnerComponent();const s=n.getRouter();s.navTo(t,e,o)},getText:function(t){const e=this.getModel("i18n");const o=e.getResourceBundle();const n=o.getText(t);return n},navBack:function(){const t=e.getInstance();const o=t.getPreviousHash();if(o){window.history.go(-1)}else{this.navTo("Home",{},true)}},getStorage:function(){return window.localStorage},clearModel:function(t){const e=this.getModel(t);const o=e.getData();for(var n in o){o[n]=""}e.setData(o)},fetchAvatar:async function(t){if(t){const e=await this._getUserInfo(t);if(e){const t="profile_pic_content";const o=e[t];return o}}},fetchFullName:async function(t){if(t){const e=await this._getUserInfo(t);if(e){const t="full_name";const o=e[t];return o}}},_getUserInfo:async function(t){const e=this.getModel("ig_user_info");const o=`/${t}`;var n=e.getProperty(o);if(n){return n}else{n=await this._fetchUserInfo(t);e.setProperty(o,n);return n}},_fetchUserInfo:async function(t){if(!this._oFetchPromises[t]){this._oFetchPromises[t]=fetch(`${this.API_BASE_URL}/get-user-info/${t}`,{method:"GET"})}const e=this._oFetchPromises[t];const o=await e;if(o.ok){const t=await o.json();return t}else{return{}}}})});
},
	"com/perezjquim/iglivemode/pwa/controller/util/SWHelper.js":function(){sap.ui.define(["sap/ui/base/Object"],function(e){return e.extend("com.perezjquim.iglivemode.pwa.controller.util.SWHelper",{_oController:null,constructor:function(e){this._oController=e},init:function(){this._cleanup();this._registerSW();window.addEventListener("beforeunload",this._cleanup.bind(this))},_registerSW:function(){if(navigator.serviceWorker){navigator.serviceWorker.register("/sw.js")}},_cleanup:function(){if(navigator.serviceWorker){navigator.serviceWorker.getRegistrations().then(function(e){for(let r of e){r.unregister()}})}}})});
},
	"com/perezjquim/iglivemode/pwa/i18n/i18n.properties":'appTitle=IG Live Mode\nappDescription=IG Live Mode\n\nenable_live=Enable Live Mode\ndisable_live=Disable Live Mode\n\nHome=Home\n\nToggleLiveMode=Enable/Disable Live Mode\n\nConfig=Config\nuser=IG User\npw=IG Password\ngeneral_blacklist=General blacklist\ngeneral_blacklist_tip=IG followers blocked in general\nlive_whitelist=Live whitelist\nlive_whitelist_tip=IG followers allowed to watch IG lives\n\nincomplete_data=Incomplete data!\n\nconfirm=Confirm\ncancel=Cancel\n\naction_success=Done!\naction_error=Error!\n\nupdating=Update available! Reloading...\n\nconfirm_remove_user=Are you sure you want to remove this user?\nuser_removed=User removed!\n\nlogin=Login\nlogoff=Logoff\nuser_details=IG User Details\n\n',
	"com/perezjquim/iglivemode/pwa/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"com.perezjquim.iglivemode.pwa","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"servicecatalog.connectivityComponentForManifest","version":"0.0.0"},"dataSources":{}},"sap.ui":{"technology":"UI5","icons":{"icon":"images/icon.png","favIcon":"images/icon.png","phone":"images/icon.png","phone@2":"images/icon.png","tablet":"images/icon.png","tablet@2":"images/icon.png"},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"com.perezjquim.iglivemode.pwa.view.App","type":"XML","async":true},"dependencies":{"minUI5Version":"1.52.16","libs":{"sap.ui.layout":{},"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.perezjquim.iglivemode.pwa.i18n.i18n"}},"config":{"type":"sap.ui.model.json.JSONModel","uri":"model/config.json"},"navigation":{"type":"sap.ui.model.json.JSONModel","uri":"model/navigation.json"},"ig_user_info":{"type":"sap.ui.model.json.JSONModel"},"new_user_prompt":{"type":"sap.ui.model.json.JSONModel","uri":"model/new_user_prompt.json"},"login_prompt":{"type":"sap.ui.model.json.JSONModel"}},"resources":{},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"controlId":"app","viewPath":"com.perezjquim.iglivemode.pwa.view","controlAggregation":"pages"},"routes":[{"name":"Home","pattern":"","target":["Home"]},{"name":"Config","pattern":"Config","target":["Config"]},{"name":"ToggleLiveMode","pattern":"ToggleLiveMode","target":["ToggleLiveMode"]}],"targets":{"Home":{"viewType":"XML","transition":"slide","controlAggregation":"pages","viewName":"Home"},"Config":{"viewType":"XML","transition":"slide","controlAggregation":"pages","viewName":"Config"},"ToggleLiveMode":{"viewType":"XML","transition":"slide","controlAggregation":"pages","viewName":"ToggleLiveMode"}}}}}',
	"com/perezjquim/iglivemode/pwa/sw.js":function(){self.addEventListener("fetch",function(e){});
},
	"com/perezjquim/iglivemode/pwa/view/App.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.App"\n    xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:tnt="sap.tnt"><tnt:ToolPage><tnt:header><f:ShellBar \n            \thomeIcon="./images/icon.png" \n            \thomeIconPressed="onHomeButtonPress" \n                showMenuButton="true"                 \n            \tmenuButtonPressed="onMenuButtonPress" \n                showNavButton="true"\n                navButtonPressed="onNavButtonPress"\n            \ttitle="{i18n>appTitle}"><f:profile><Avatar\n                            src="{ path: \'config>/authenticated_user_name\', formatter: \'.fetchAvatar\' }"\n                            displaySize="S"\n                            showBorder="true"\n                            press="onAvatarPress"/></f:profile></f:ShellBar></tnt:header><tnt:sideContent><tnt:SideNavigation \n            \texpanded="false" \n            \titemSelect="onNavigationItemSelect" \n            \tselectedKey="{navigation>/selected}"><tnt:NavigationList \n                \titems="{navigation>/items}"><tnt:NavigationListItem \n                    \ticon="{navigation>icon}" \n                    \tkey="{navigation>key}" \n                    \ttext="{ path: \'navigation>key\', formatter: \'.getText\' }"/></tnt:NavigationList></tnt:SideNavigation></tnt:sideContent><tnt:mainContents><App \n            \tid="app"/></tnt:mainContents></tnt:ToolPage></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/Config.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.Config" \n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:core="sap.ui.core"><Page \n        title="{i18n>Config}"><f:SimpleForm \n            editable="true"><f:content><Label \n                    text="{i18n>general_blacklist}" /><Table\n                    items="{config>/general_blacklist}"><headerToolbar><OverflowToolbar><content><core:Icon\n                                    src="sap-icon://private"\n                                    color="Negative"/><ObjectStatus\n                                    state="Error"\n                                    text="{i18n>general_blacklist_tip}"/><ToolbarSpacer /><Button\n                                    icon="sap-icon://add"\n                                    type="Accept"\n                                    press="onAddEntry" /></content></OverflowToolbar></headerToolbar><columns><Column><Label text="{i18n>user}" /></Column></columns><items><ColumnListItem><cells><HBox\n                                    justifyContent="SpaceAround"><Avatar \n                                        busyIndicatorDelay="0"\n                                        src="{ path: \'config>user_name\', formatter: \'.fetchAvatar\' }"\n                                        displaySize="S"\n                                        showBorder="true" /><Input \n                                        width="8rem"\n                                        value="{config>user_name}"/><Text \n                                        busyIndicatorDelay="0"\n                                        width="4rem"             \n                                        wrapping="false"        \n                                        text="{ path: \'config>user_name\', formatter: \'.fetchFullName\' }"/><Button\n                                        icon="sap-icon://delete"\n                                        type="Reject"\n                                        press="onRemoveEntry"/></HBox></cells></ColumnListItem></items></Table><Label \n                    text="{i18n>live_whitelist}" /><Table\n                    items="{config>/live_whitelist}"><headerToolbar><OverflowToolbar><content><core:Icon\n                                    src="sap-icon://role"\n                                    color="Positive"/><ObjectStatus\n                                    state="Success"\n                                    text="{i18n>live_whitelist_tip}"/><ToolbarSpacer /><Button\n                                    icon="sap-icon://add"\n                                    type="Accept"\n                                    press="onAddEntry" /></content></OverflowToolbar></headerToolbar><columns><Column><Label text="{i18n>user}" /></Column></columns><items><ColumnListItem><cells><HBox\n                                    justifyContent="SpaceAround"><Avatar \n                                        busyIndicatorDelay="0"\n                                        src="{ path: \'config>user_name\', formatter: \'.fetchAvatar\' }"\n                                        displaySize="S"\n                                        showBorder="true" /><Input \n                                        width="8rem"\n                                        value="{config>user_name}"/><Text \n                                        busyIndicatorDelay="0"\n                                        width="4rem"             \n                                        wrapping="false"                    \n                                        text="{ path: \'config>user_name\', formatter: \'.fetchFullName\' }"/><Button\n                                        icon="sap-icon://delete"\n                                        type="Reject"\n                                        press="onRemoveEntry"/></HBox></cells></ColumnListItem></items></Table></f:content></f:SimpleForm></Page></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/Home.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.Home" \n    xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:mvc="sap.ui.core.mvc"><Page \n    \ttitle="{i18n>Home}"><f:GridContainer  \n            items="{ \n                path: \'navigation>/items\', \n                filters:\n                [\n                    { path: \'key\', operator: \'NE\', value1: \'Home\' }\n                ]\n            }"><f:items><GenericTile \n                    class="sapUiSmallMargin"\n                    header="{ path: \'navigation>key\', formatter: \'.getText\' }"\n                    press=".navTo(${ path: \'navigation>key\' })"><layoutData><f:GridContainerItemLayoutData minRows="2" columns="2" /></layoutData><TileContent><ImageContent src="{navigation>icon}" /></TileContent></GenericTile></f:items></f:GridContainer></Page></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/ToggleLiveMode.view.xml":'<mvc:View \n    controllerName="com.perezjquim.iglivemode.pwa.controller.ToggleLiveMode" \n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:l="sap.ui.layout"\n    xmlns:f="sap.ui.layout.form"\n    xmlns:mvc="sap.ui.core.mvc"><Page \n    \ttitle="{i18n>ToggleLiveMode}"><f:SimpleForm \n        \teditable="false"><f:content><HBox justifyContent="SpaceBetween"><Button \n                    \ticon="sap-icon://play" \n                    \tpress="onPressEnableLive" \n                    \ttext="{i18n>enable_live}" \n                    \ttype="Accept" /><Button\n                    \ticon="sap-icon://stop" \n                    \tpress="onPressDisableLive" \n                    \ttext="{i18n>disable_live}" \n                    \ttype="Reject" /></HBox></f:content></f:SimpleForm></Page></mvc:View>',
	"com/perezjquim/iglivemode/pwa/view/fragment/LoginPrompt.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"><Dialog\n\t\tbeforeOpen="onBeforeOpenLoginPrompt"\n\t\tafterClose="onAfterCloseLoginPrompt"\n\t\tescapeHandler=".dummyEscapeHandler"\n\t\ttitle="{i18n>login}"><content><VBox fitContainer="true" justifyContent="Center" alignItems="Center" alignContent="Center"><items><Input width="20vw" placeholder="{i18n>user}" value="{login_prompt>/user}"/><Input width="20vw" placeholder="{i18n>pw}" type="Password" value="{login_prompt>/pw}"/><Button\n\t\t\t\t\t\twidth="20vw"\n\t\t\t\t\t\ttext="{i18n>login}"\n\t\t\t\t\t\ttype="Emphasized"\n\t\t\t\t\t\tpress="onConfirmLogin"/></items></VBox></content></Dialog></core:FragmentDefinition>',
	"com/perezjquim/iglivemode/pwa/view/fragment/NewUserPopover.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Popover\n\t\tbeforeOpen="onBeforeOpenNewUserPopover"\n\t\tafterClose="onAfterCloseNewUserPopover"\t\n\t\tplacement="Bottom"\n\t\tshowHeader="false"><content><Input value="{new_user_prompt>/user_name}"/></content><footer><OverflowToolbar><Button\n\t\t\t\t\ttext="{i18n>confirm}"\n\t\t\t\t\ttype="Emphasized"\n\t\t\t\t\tpress="onConfirmNewUser"/><ToolbarSpacer/><Button\n\t\t\t\t\ttext="{i18n>cancel}"\n\t\t\t\t\ttype="Reject"\n\t\t\t\t\tpress="onCancelNewUser"/></OverflowToolbar></footer></Popover></core:FragmentDefinition>\n',
	"com/perezjquim/iglivemode/pwa/view/fragment/UserDetailsPopover.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><ResponsivePopover\n\t\tid="myPopover"\n\t\ttitle="{Name}"\n\t\tplacement="Bottom" ><customHeader><OverflowToolbar><Title \n\t\t\t\t\ttext="{i18n>user_details}"/><ToolbarSpacer/><Button \n\t\t\t\t\ttype="Emphasized"\n\t\t\t\t\ttext="{i18n>logoff}"\n\t\t\t\t\tpress="onLogoff"/></OverflowToolbar></customHeader><content><HBox\n\t\t\t\talignItems="Center"\n\t\t\t\talignContent="Center"\n\t\t\t\tjustifyContent="SpaceBetween"><items><Avatar\n\t\t\t\t\t\tclass="sapUiTinyMargin"\n\t                            \t\tsrc="{ path: \'config>/authenticated_user_name\', formatter: \'.fetchAvatar\' }"\n\t\t                            \tdisplaySize="L"\n\t\t                            \tshowBorder="true"/><Text \n\t\t\t\t\t\tclass="sapUiTinyMargin"\n\t\t\t\t\t\ttext="{ path: \'config>/authenticated_user_name\', formatter: \'.fetchFullName\' }" /></items></HBox></content></ResponsivePopover></core:FragmentDefinition>'
}});
